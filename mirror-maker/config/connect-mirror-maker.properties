# Run with ./bin/connect-mirror-maker.sh connect-mirror-maker.properties --clusters external

############################# Cluster Settings  #############################

# specify any number of cluster aliases
clusters = internal, external

# connection information for each cluster
internal.bootstrap.servers = kafka:9092
external.bootstrap.servers = out-kafka:9092

# enable and configure individual replication flows
internal->external.enabled = true
external->internal.enabled = false

tasks.max = 5

dedicated.mode.enable.internal.rest = true
add.source.alias.to.metrics = true

############################# Topic Sync Settings  #############################

topics = input,output
topics.exclude = .*[\-\.]internal, .*\.replica, __consumer_offsets, exclude_.*
refresh.topics.enabled = true
refresh.topics.interval.seconds = 30
sync.topic.configs.enabled = true
sync.topic.acls.enabled = true

# Setting replication factor of newly created remote topics
# For anything other than development testing, a value greater than 1 is recommended to ensure availability such as 3.
replication.factor = 1

replication.policy.class = org.apache.kafka.connect.mirror.IdentityReplicationPolicy
replication.policy.separator = .

############################# Group Sync Settings  #############################

groups = .*
groups.exclude = console-consumer-.*, connect-.*, __.*
refresh.groups.enabled = true
refresh.groups.interval.seconds = 5

############################# Group Offset Sync Settings  #############################

sync.group.offsets.enabled = true
sync.group.offsets.interval.seconds = 5
offset-syncs.topic.location = target
emit.checkpoints.enabled = true
emit.checkpoints.interval.seconds = 5

############################# Internal Topic Settings  #############################

# The replication factor for mm2 internal topics "heartbeats", "external.checkpoints.internal" and
# "mm2-offset-syncs.external.internal"
# For anything other than development testing, a value greater than 1 is recommended to ensure availability such as 3.
heartbeats.topic.replication.factor = 1
checkpoints.topic.replication.factor = 1
offset-syncs.topic.replication.factor = 1

# The replication factor for connect internal topics "mm2-configs.external.internal", "mm2-offsets.external.internal" and
# "mm2-status.external.internal"
# For anything other than development testing, a value greater than 1 is recommended to ensure availability such as 3.
config.storage.replication.factor = 1
offset.storage.replication.factor = 1
status.storage.replication.factor = 1

emit.heartbeats.enabled = true
emit.heartbeats.interval.seconds = 30

############################# Other Settings #############################

config.providers = file,directory
config.providers.file.class = org.apache.kafka.common.config.provider.FileConfigProvider
config.providers.directory.class = org.apache.kafka.common.config.provider.DirectoryConfigProvider
